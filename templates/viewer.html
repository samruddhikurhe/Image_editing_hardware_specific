<!-- templates/viewer.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>RAW Viewer — quick preview + optimized full-res</title>
  <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
  <h2>RAW Viewer — quick preview + optimized full-res processing</h2>

  <div id="controls">
    <button id="startBtn">Load & Preprocess RAW</button>
    <label>Raw path:
      <input id="rawPath" value="{{ raw_default }}" size="60">
    </label>
    <span id="policyInfo">Policy: {{ policy }}</span>
  </div>

  <div id="viewer">
    <div id="imageWrap">
      <div id="spinner" class="spinner" style="display:none"></div>
      <img id="theImage" src="" alt="preview will appear here">
    </div>

    <div id="zoomControls">
      <button id="zoomIn">+</button>
      <button id="zoomOut">−</button>
      <button id="resetZoom">Reset</button>
      <span id="zoomLevel">1.00x</span>
    </div>

  </div>

  <div id="filters">
    <h3>Quick filters (apply to preview / ask to edit full):</h3>
    <label>Saturation <input type="range" id="sat" min="0.5" max="2.0" step="0.05" value="1.15"></label>
    <label>Warmth <input type="range" id="warm" min="0.9" max="1.2" step="0.01" value="1.02"></label>
    <label>Brightness <input type="range" id="bright" min="0.8" max="1.2" step="0.01" value="1.0"></label>
    <label>Contrast <input type="range" id="contrast" min="0.8" max="1.2" step="0.01" value="1.02"></label>
    <button id="applyPreview">Apply to Preview</button>
    <button id="applyFull">Apply to Full Image (queue)</button>
  </div>

  <script>
    // Set preview and full filenames from server-rendered context
    const SERVER_PREVIEW = "{{ preview_fname or '' }}";
    const SERVER_FULL = "{{ full_fname or '' }}";
  </script>
  <script src="/static/main.js"></script>
</body>
</html>
